<apex:page id="Player" controller="PlayerController" cache="false" showHeader="false">
    <head>
       <c:Header />
    </head>
        
    <body>
        <!--
        <apex:pageBlock rendered="true" title="All tournaments of current player">
                <apex:pageBlockTable value="{!tournamentsOfPlayer}" var="tournament">
                    <apex:column value="{!tournament.Name}"/>
                    <apex:column value="{!tournament.StartDate__c}"/>
                    <apex:column value="{!tournament.Status__c}"/>
                    <apex:column value="{!tournament.Format__c}"/>
                    <apex:column value="{!tournament.Type__c}"/>
                </apex:pageBlockTable>
        </apex:pageBlock>...
        -->
       
        
         <div id = "imageUrlDiv" style="margin: 20px 20px 20px 20px; float: left;">
            <img src="{!imageUrl}"/>
        </div>    

                <div style = "float:left; width:40%; height:200px; border: 3px solid yellow; margin-top: 20px;" id = 'statistics-div'>
                        <p style="font-size:20px;">Name: {!player.Name}</p>
                        <script>
                            var hasTournaments = '{!hasCurrentTournaments}';
                            if (hasTournaments=='true'){
                                $('#statistics-div').append("<p style='font-size:20px'>Statistics</p>");
                            }
                        </script>
                       
                </div>
        
                         <apex:form enctype="multipart/form-data" rendered='{!playerCookieIsCurrentPlayer}'>
                            <apex:pageMessages />
                             <apex:pageBlock>
                                <apex:pageBlockButtons location="bottom">       
                             <apex:commandButton action="{!uploadNewImage}" value="Save" style="background-color:yellow;"/>
                            </apex:pageBlockButtons>
                            <apex:pageBlockSection>
                            <apex:pageBlockSectionItem >
                                <apex:outputLabel value="Upload image" for="file" style="font-size:15px;"/>
                                <apex:inputFile value="{!document.body}" filename="{!document.name}" id="file"/>
                            </apex:pageBlockSectionItem>
                            </apex:pageBlockSection>
                            </apex:pageBlock>
                            </apex:form>
                
        <c:TournamentsSearch player="{!player}"/>
        
        <apex:form >
            <apex:actionFunction name="setFirstOptionSelected" action="{!getCurrentTournamentById}" rerender="currentTournamentSelected"/>    
        </apex:form>        
        
        <apex:form >
            <apex:pageMessages />
                <apex:pageBlock title="Select current tournament" rendered="true">
                    <apex:selectList value="{!currentTournamentId}" size="1" style="margin-left:18%;" required="true">
                        <apex:actionSupport event="onchange" action="{!getCurrentTournamentById}" rerender="currentTournamentSelected" />    
                        <apex:selectOptions value="{!currentTournamentsOptions}"/>
                </apex:selectList>
                </apex:pageBlock>
        </apex:form>
        
        
        <apex:pageBlock id="currentTournamentSelected" title="Selected tournament">
            <apex:pageBlockSection title="Opportunity Information">
                <apex:outputField value="{!currentTournament.Name}"/>
                <apex:outputField value="{!currentTournament.Status__c}"/>
                <apex:outputField value="{!currentTournament.Format__c}"/>
                <apex:outputField value="{!currentTournament.Type__c}"/>
                <p style = "clear:left;"/>
               
               <apex:pageBlockSection title="Inner page block section">
                
               </apex:pageBlockSection>
            </apex:pageBlockSection>
        </apex:pageBlock>
        
        <script>
                function firstOptionSelected(){
                    setFirstOptionSelected();
                }
            firstOptionSelected();
        </script>
    </body> 
<c:Footer/>         
</apex:page>